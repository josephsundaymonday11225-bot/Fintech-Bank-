<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <title>F Bank - Signup</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Tailwind CSS -->
          <script src="https://cdn.tailwindcss.com"></script>
            <!-- Supabase Client -->
              <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.30.0/dist/supabase.min.js"></script>
                <style>
                    /* Futuristic animated background */
                        body {
                              background: radial-gradient(circle at center, #5a0bc0, #1e3c72);
                                    animation: backgroundShift 10s infinite alternate;
                                        }
                                            @keyframes backgroundShift {
                                                  0% { background-position: 0% 50%; }
                                                        50% { background-position: 100% 50%; }
                                                              100% { background-position: 0% 50%; }
                                                                  }
                                                                    </style>
                                                                    </head>
                                                                    <body class="min-h-screen flex items-center justify-center font-sans">

                                                                      <div class="bg-black/80 backdrop-blur-md text-white rounded-2xl p-8 shadow-lg w-full max-w-md border border-purple-500">
                                                                          <h2 class="text-3xl font-bold mb-6 text-center text-purple-400 tracking-widest animate-pulse">F BANK</h2>

                                                                              <form id="signupForm" class="flex flex-col gap-4">
                                                                                    <input type="text" id="fullName" placeholder="Full Name" class="p-3 rounded border border-purple-600 bg-black/50" required />
                                                                                          <input type="email" id="email" placeholder="Email" class="p-3 rounded border border-purple-600 bg-black/50" required />
                                                                                                <input type="text" id="phone" placeholder="Phone" class="p-3 rounded border border-purple-600 bg-black/50" required />
                                                                                                      <input type="password" id="password" placeholder="Password (min 8 chars)" class="p-3 rounded border border-purple-600 bg-black/50" required minlength="8" />
                                                                                                            <button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white p-3 rounded tracking-wide uppercase font-semibold transition duration-300">Sign Up</button>
                                                                                                                </form>

                                                                                                                    <p class="mt-4 text-sm text-center text-purple-400">Already have an account? <a href="login.html" class="underline">Sign In</a></p>

                                                                                                                        <div id="loading" class="hidden mt-4 text-center text-purple-300">Processing...</div>
                                                                                                                          </div>

                                                                                                                            <script>
                                                                                                                                // Supabase Setup
                                                                                                                                    const supabaseUrl = "https://hfdnfdkrzjfixfascaxq.supabase.co";
                                                                                                                                        const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhmZG5mZGtyempmaXhmYXNjYXhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMxNjkyMDgsImV4cCI6MjA3ODc0NTIwOH0.WzVL4LwjwfmDmD2dUUZpd572qx5Dh4XJs8l_ovFM4Cc";
                                                                                                                                            const supabase = supabase.createClient(supabaseUrl, supabaseAnonKey);

                                                                                                                                                function generateAccountNumber() {
                                                                                                                                                      const base = Array.from({ length: 9 }, () => Math.floor(Math.random() * 10)).join("");
                                                                                                                                                            const sum = base.split("").reduce((s, d) => s + Number(d), 0);
                                                                                                                                                                  const checksum = sum % 10;
                                                                                                                                                                        return `${base}${checksum}`;
                                                                                                                                                                            }

                                                                                                                                                                                const form = document.getElementById("signupForm");
                                                                                                                                                                                    const loading = document.getElementById("loading");

                                                                                                                                                                                        form.addEventListener("submit", async (e) => {
                                                                                                                                                                                              e.preventDefault();
                                                                                                                                                                                                    loading.classList.remove("hidden");

                                                                                                                                                                                                          const full_name = document.getElementById("fullName").value.trim();
                                                                                                                                                                                                                const email = document.getElementById("email").value.trim();
                                                                                                                                                                                                                      const phone = document.getElementById("phone").value.trim();
                                                                                                                                                                                                                            const password = document.getElementById("password").value;

                                                                                                                                                                                                                                  if (password.length < 8) {
                                                                                                                                                                                                                                          alert("Password must be at least 8 characters!");
                                                                                                                                                                                                                                                  loading.classList.add("hidden");
                                                                                                                                                                                                                                                          return;
                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                      const account_number = generateAccountNumber();
                                                                                                                                                                                                                                                                            const balance = 0;

                                                                                                                                                                                                                                                                                  const { data, error } = await supabase.from("users").insert([{
                                                                                                                                                                                                                                                                                          full_name,
                                                                                                                                                                                                                                                                                                  email,
                                                                                                                                                                                                                                                                                                          phone,
                                                                                                                                                                                                                                                                                                                  password,
                                                                                                                                                                                                                                                                                                                          account_number,
                                                                                                                                                                                                                                                                                                                                  balance
                                                                                                                                                                                                                                                                                                                                        }]).select().single();

                                                                                                                                                                                                                                                                                                                                              if (error) {
                                                                                                                                                                                                                                                                                                                                                      alert("Signup failed: " + error.message);
                                                                                                                                                                                                                                                                                                                                                              console.error(error);
                                                                                                                                                                                                                                                                                                                                                                      loading.classList.add("hidden");
                                                                                                                                                                                                                                                                                                                                                                              return;
                                                                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                                                                          // Save user to localStorage
                                                                                                                                                                                                                                                                                                                                                                                                localStorage.setItem("currentUser", JSON.stringify(data));

                                                                                                                                                                                                                                                                                                                                                                                                      // Redirect to homepage
                                                                                                                                                                                                                                                                                                                                                                                                            window.location.href = "FintechHomePage.html";
                                                                                                                                                                                                                                                                                                                                                                                                                });
                                                                                                                                                                                                                                                                                                                                                                                                                  </script>
                                                                                                                                                                                                                                                                                                                                                                                                                  </body>
                                                                                                                                                                                                                                                                                                                                                                                                                  </html>