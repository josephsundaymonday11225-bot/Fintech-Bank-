<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <title>F Bank - Dashboard</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Tailwind CDN -->
          <script src="https://cdn.tailwindcss.com"></script>
            <!-- Framer Motion (optional for animations) -->
              <script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>
                <!-- Supabase Client -->
                  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.30.0/dist/supabase.min.js"></script>
                  </head>
                  <body class="bg-gradient-to-r from-purple-600 to-blue-500 text-white min-h-screen font-sans">

                    <!-- Header -->
                      <header class="flex justify-between items-center p-6">
                          <div class="flex items-center gap-2 font-bold text-xl">
                                <span>F</span><span>ü¶Å</span><span>Bank</span>
                                    </div>
                                        <nav class="flex gap-4 items-center">
                                              <a href="#services">Services</a>
                                                    <a href="#about">About</a>
                                                          <a href="#contact">Contact</a>
                                                                <a href="signup.html">Sign Up</a>
                                                                      <a href="login.html">Sign In</a>
                                                                          </nav>
                                                                            </header>

                                                                              <!-- Main Dashboard -->
                                                                                <main class="max-w-6xl mx-auto px-6 py-12">
                                                                                    <section class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">

                                                                                          <div>
                                                                                                  <h1 class="text-4xl font-extrabold mb-4 animate-fade-in">Fast, Secure & Smart Banking</h1>
                                                                                                          <p class="mb-6 animate-fade-in delay-200">
                                                                                                                    Send & receive money instantly, buy data/airtime, and get real-time notifications.
                                                                                                                            </p>

                                                                                                                                    <div class="flex gap-4 animate-fade-in delay-400">
                                                                                                                                              <a href="signup.html" class="bg-white text-purple-700 px-5 py-3 rounded-md">Open Account</a>
                                                                                                                                                        <a href="#demo" class="border border-white px-5 py-3 rounded-md">View Demo</a>
                                                                                                                                                                </div>

                                                                                                                                                                        <div id="userDashboard" class="mt-8 grid grid-cols-2 gap-4"></div>
                                                                                                                                                                              </div>

                                                                                                                                                                                    <div class="bg-white rounded-2xl p-6 shadow-lg text-black min-h-[300px] flex items-center justify-center" id="welcomeMessage">
                                                                                                                                                                                            Loading dashboard...
                                                                                                                                                                                                  </div>

                                                                                                                                                                                                      </section>

                                                                                                                                                                                                          <!-- Features -->
                                                                                                                                                                                                              <section id="features" class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-4">
                                                                                                                                                                                                                    <div class="bg-white p-5 rounded-lg shadow-sm text-purple-700">
                                                                                                                                                                                                                            <div class="font-bold mb-2">Transfer & Receive</div>
                                                                                                                                                                                                                                    <p class="text-sm text-purple-100">Send and receive money instantly.</p>
                                                                                                                                                                                                                                          </div>
                                                                                                                                                                                                                                                <div class="bg-white p-5 rounded-lg shadow-sm text-purple-700">
                                                                                                                                                                                                                                                        <div class="font-bold mb-2">Realtime Notifications</div>
                                                                                                                                                                                                                                                                <p class="text-sm text-purple-100">Instant alerts for deposits, transfers, and airtime.</p>
                                                                                                                                                                                                                                                                      </div>
                                                                                                                                                                                                                                                                            <div class="bg-white p-5 rounded-lg shadow-sm text-purple-700">
                                                                                                                                                                                                                                                                                    <div class="font-bold mb-2">Data & Airtime</div>
                                                                                                                                                                                                                                                                                            <p class="text-sm text-purple-100">Buy airtime or data bundles quickly.</p>
                                                                                                                                                                                                                                                                                                  </div>
                                                                                                                                                                                                                                                                                                      </section>
                                                                                                                                                                                                                                                                                                        </main>

                                                                                                                                                                                                                                                                                                          <!-- Supabase + JS Logic -->
                                                                                                                                                                                                                                                                                                            <script>
                                                                                                                                                                                                                                                                                                                // Supabase setup
                                                                                                                                                                                                                                                                                                                    const supabaseUrl = "https://hfdnfdkrzjfixfascaxq.supabase.co";
                                                                                                                                                                                                                                                                                                                        const supabaseAnonKey = "YOUR_ANON_KEY"; // replace with your key
                                                                                                                                                                                                                                                                                                                            const supabase = supabase.createClient(supabaseUrl, supabaseAnonKey);

                                                                                                                                                                                                                                                                                                                                // Generate account number
                                                                                                                                                                                                                                                                                                                                    function generateAccountNumber() {
                                                                                                                                                                                                                                                                                                                                          const base = Array.from({ length: 9 }, () => Math.floor(Math.random() * 10)).join("");
                                                                                                                                                                                                                                                                                                                                                const sum = base.split("").reduce((s, d) => s + Number(d), 0);
                                                                                                                                                                                                                                                                                                                                                      const checksum = sum % 10;
                                                                                                                                                                                                                                                                                                                                                            return `${base}${checksum}`;
                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                    // Load user from localStorage (set after signup/login)
                                                                                                                                                                                                                                                                                                                                                                        const user = JSON.parse(localStorage.getItem("currentUser"));

                                                                                                                                                                                                                                                                                                                                                                            if (!user) {
                                                                                                                                                                                                                                                                                                                                                                                  document.getElementById("welcomeMessage").innerText = "Please login or signup to view dashboard.";
                                                                                                                                                                                                                                                                                                                                                                                      } else {
                                                                                                                                                                                                                                                                                                                                                                                            const accountNumber = user.account_number || generateAccountNumber();
                                                                                                                                                                                                                                                                                                                                                                                                  const balance = user.balance || 0;

                                                                                                                                                                                                                                                                                                                                                                                                        // Update DB if first time
                                                                                                                                                                                                                                                                                                                                                                                                              if (!user.account_number) {
                                                                                                                                                                                                                                                                                                                                                                                                                      supabase.from("users").update({ account_number }).eq("id", user.id);
                                                                                                                                                                                                                                                                                                                                                                                                                              user.account_number = accountNumber;
                                                                                                                                                                                                                                                                                                                                                                                                                                      localStorage.setItem("currentUser", JSON.stringify(user));
                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                  document.getElementById("welcomeMessage").innerText = `Welcome, ${user.full_name}!`;

                                                                                                                                                                                                                                                                                                                                                                                                                                                        // Dashboard cards
                                                                                                                                                                                                                                                                                                                                                                                                                                                              document.getElementById("userDashboard").innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <div class="bg-white text-purple-700 rounded-lg p-4 shadow-sm flex items-center gap-3">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <div>üí∞</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <div class="text-sm">Balance</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <div class="font-semibold text-lg">‚Ç¶${balance.toLocaleString(undefined, { minimumFractionDigits: 2 })}</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <div class="bg-white text-purple-700 rounded-lg p-4 shadow-sm flex items-center justify-between">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <div class="text-sm">Account Number</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <div class="font-mono font-semibold">${accountNumber}</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <button onclick="regenerateAccount()" class="text-sm text-purple-700">Regenerate</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                `;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      // Regenerate account function
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            window.regenerateAccount = async function() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const newAccount = generateAccountNumber();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            document.querySelector("#userDashboard div:nth-child(2) .font-mono").innerText = newAccount;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    await supabase.from("users").update({ account_number: newAccount }).eq("id", user.id);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            user.account_number = newAccount;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    localStorage.setItem("currentUser", JSON.stringify(user));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </script>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <style>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      @keyframes fade-in {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            0% { opacity: 0; transform: translateY(10px); }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  100% { opacity: 1; transform: translateY(0); }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          .animate-fade-in { animation: fade-in 0.8s ease forwards; }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              .delay-200 { animation-delay: 0.2s; }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  .delay-400 { animation-delay: 0.4s; }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </style>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </html>